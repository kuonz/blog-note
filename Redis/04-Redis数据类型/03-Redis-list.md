---
author: "kuonz"
draft: false
title: "Redis-list"
date: 2020-04-05
categories: ["Redis"]
---

## list类型简介

| 项           | 说明                             |
| ------------ | -------------------------------- |
| 存储的数据   | 有序存储多个`string`             |
| 特点         | 有序，可以左进\|左出\|右进\|右出 |
| 底层数据结构 | 双向链表                         |

### 类型结构模型

![](/03-Redis-list-images/image-20200322192110086.png)



## list操作命令

### 添加

| 命令                                                 | 说明                                        |
| ---------------------------------------------------- | ------------------------------------------- |
| **lpush** *key value1 [value2] ……*                   | 左添加                                      |
| **rpush** *key value1 [value2] ……*                   | 右添加                                      |
| **linsert** *key* *before\|after* *value* *newValue* | 从列表第一个value的前\|后插入新元素newValue |

### 设置

| 命令                              | 说明                                                      |
| --------------------------------- | --------------------------------------------------------- |
| **lset** *key* *index* *newValue* | 修改列表中index下标的元素为newValue，支持反向索引，即负数 |



### 获取

| 命令                                        | 说明                                     |
| ------------------------------------------- | ---------------------------------------- |
| **lpop** *key*                              | 从左弹出获取                             |
| **rpop** *key*                              | 从右弹出获取                             |
| **blpop** *key1 [key2] timeout*             | 阻塞式从左弹出获取，时间单位：秒         |
| **brpop** *key1 [key2] timeout*             | 阻塞式从右弹出获取，时间单位：秒         |
| **brpoplpush** *source destination timeout* | 阻塞式从右弹出获取后左添加，时间单位：秒 |
| **lrange** *key start stop*                 | 范围获取                                 |
| **lindex** *key index*                      | 索引获取                                 |
| **llen** *key*                              | 获取元素个数                             |

### 删除

| 命令                          | 说明                                        |
| ----------------------------- | ------------------------------------------- |
| **lrem** *key count value*    | 从左向右删除 count 个为 value 的值          |
| **ltrim** *key* *start* *end* | 按照索引范围修剪列表，保留[start,end]的元素 |



## list注意事项

* `list`中保存的数据都是`string`类型，数据总容量是有限的，最多`2^32 - 1` 个元素
* `list`具有索引的概念，但是操作数据时通常以队列的形式进行入队出队操作，或以栈的形式进行入栈出栈操作
* 获取全部数据操作结束索引设置为-1 



## list使用场景

* 用于最新消息展示
* 用于具有操作先后顺序的数据控制