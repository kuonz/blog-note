---
author: "kuonz"
draft: false
title: "Redis-string"
date: 2020-04-05
categories: ["Redis"]
---

## string类型简介

| 项   | 说明                                                       |
| ---- | ---------------------------------------------------------- |
| 数据 | 字符串，如果字符串以整数的形式展示，则可以作为数字操作使用 |
| 特点 | 最简单的数据存储类型，也是最常用的数据存储类型             |

### 类型模型

![](/post/Redis/04-Redis数据类型/01-Redis-string-images/image-20200322181252547.png)



## string操作命令

### 设置

| 命令                                | 说明                          | 备注                                        | 复杂度 |
| ----------------------------------- | ----------------------------- | ------------------------------------------- | ------ |
| **set** *key value*                 | 添加/修改数据                 | 不管key是否存在都可以                       | O(1)   |
| **setnx** *key* *value*             | 添加数据                      | 当key不存在才能执行                         | O(1)   |
| **mset** *key1 value1 key2 value2*  | 添加/修改多个数据             |                                             | O(n)   |
| **getset** *key* *value*            | 先获取key的value，再更新      | 如果key不存在，则返回nil，然后创建key-value | O(1)   |
| **append** *key value*              | 追加信息到原始信息后部        | 如果原始信息存在就追加，否则新建            | O(1)   |
| **setrange** *key* *index* *value*  | 设置指定下标对应的值          |                                             | O(1)   |
| **setex** *key seconds value*       | 添加/修改数据，并设置过期时间 | 单位：秒                                    | O(1)   |
| **psetex** *key milliseconds value* | 添加/修改数据，并设置过期时间 | 单位：毫秒                                  | O(1)   |

### 获取

| 命令                 | 说明           | 备注 | 复杂度 |
| -------------------- | -------------- | ---- | ------ |
| **get** *key*        | 获取数据       |      | O(1)   |
| **mget** *key1 key2* | 获取多个数据   |      | O(n)   |
| **strlen** *key*     | 获取字符串长度 |      | O(1)   |

### 删除

| 命令          | 说明     | 备注                             | 复杂度 |
| ------------- | -------- | -------------------------------- | ------ |
| **del** *key* | 删除数据 | 删除不存在的key时不报错，返回nil | O(1)   |

### 计算

| 命令                            | 说明                  | 备注                           | 复杂度 |
| ------------------------------- | --------------------- | ------------------------------ | ------ |
| **incr** *key*                  | 值加1                 | 如果值不能作为数字使用，则报错 |        |
| **incrby** *key* *increment*    | 值加increment(整数)   | 如果值不能作为数字使用，则报错 |        |
| **incrbyfloat** *key increment* | 值加increment(浮点数) | 如果值不能作为数字使用，则报错 |        |
| **decr** *key*                  | 值减1                 | 如果值不能作为数字使用，则报错 |        |
| **decrby** *key increment*      | 值减increment(整数)   | 如果值不能作为数字使用，则报错 |        |
| **decrbyfloat** *key increment* | 值减increment(浮点数) | 如果值不能作为数字使用，则报错 |        |



## string注意事项

* `string`类型大小最大是`512MB`

* `string`在 `redis`内部存储默认就是一个字符串，当遇到增减操作如`incr`，`decr`时会转成数值型进行计算

  如果原始数据不能转成数值，或超越了 `redis` 数值上限范围，将报错

  数值范围是【`-9223372036854775806`, `9223372036854775807`】【`-2^32 - 1`, `2^32`】



## string使用场景

* `redis`用于控制数据库表主键id，为数据库表主键提供生成策略，保障数据库表的主键唯一性
* `redis` 控制数据的生命周期，通过数据是否失效控制业务行为，适用于所有具有时效性限定控制的操作
* `redis` 应用于各种结构型和非结构型高热度数据访问加速